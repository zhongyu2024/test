<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <title>用户管理</title>
    <meta name="keywords" content="keyword1,keyword2,keyword3">
    <meta name="description" content="this is my page">
    <meta name="content-type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" th:href="@{../../layui/css/layui.css}" media="all" />
    <script type="text/javascript" th:src="@{../../layui/layui.js}"></script>
    <script type="text/javascript" src="../../js/jquery-1.8.3.min.js"></script>
	<script th:src="@{{path}/page/pic/indexPic.js(path=${contextPath})}"></script> 

  </head>
  <style>
  	input{
  		height:30px;
  	}
  	select{
  		height:30px;
  	}
  	.add-class{
  		width:150px;
  		height:40px;
  		color:white;
  		background: #169BD5;
  		line-height: 40px;
  		text-align: center; 	
  		border-radius: 3px;
  		margin-top:30px;
  		margin-left:1%;
  		cursor: pointer;
  	}
  	.add-btn{
  		width:150px;
  		height:40px;
  		color:white;
  		background: #169BD5;
  		line-height: 40px;
  		text-align: center; 	
  		border-radius: 3px;
  		margin-top:10px;
  		margin-left:5%;
  		cursor: pointer;
  	}
  	.userblock{
  		margin-top:10px;
  	}
  	.line-time{
  		margin-left:100px;
  		margin-top:30px;
  		font-size: 15px;
  	}
  	.same-line{
  		margin-left:30px;
  	}
  	#lastTime1,#lastTime2{
  		width:100px;
  		height:35px;
  	}
  	
  	/*add_course*/
  	#add_course{
  		margin-left: 50px;
  		display: none;
  	}
  	.add_div{
  		margin-top: 20px;
  	}
  	#add-confirm{
  		margin-bottom: 20px;
  	}
  </style>
  
  <body>
    <blockquote class="layui-elem-quote layui-bg-green userblock" >
		<div id="s1">轮播图管理&gt;导航管理</div>
	</blockquote>
	<div class="add-class" lay-event="add" id="add-btn">
		<span>添加轮播图</span>
	</div>
	<div>
		<table id="chapterlist" lay-filter="chapterlist"></table>
	</div>
	<div>
		<ul id="demo"></ul>
	</div>
	<!--操作-->
	<script type="text/html" id="chapterlistBar">
		<a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
		<a class="layui-btn layui-btn-xs layui-btn-danger" lay-event="del">删除</a>
		
	</script>
	
	<div id="add_course" style="display:none;">
	<div class="add_div">
		简介：<input type="text" id="intro" >
	</div>
	<div class="add_div">
		排序：<input type="text" id="sort" >
	</div>
	<div class="add_div">
		跳转链接：<input type="text" id="jump_url" >
	</div>
	<div id="" class="add_div">
			轮播图片：<input type="text" id="image_url" name="image_url">
				
				<div class="layui-upload-list imgdiv">
				    <img class="layui-upload-img" id="demo1" width="100" height="100">
				    <button type="button" class="layui-btn" id="uploadImg">
					  <i class="layui-icon">&#xe67c;</i>上传图片
					</button>
			 	</div>
	</div>
	<div class="add-class add-confirm" id="add-confirm">添加</div>
	</div>
	
	<div id="up_course" style="display:none;">
	<div class="add_div" style="display:none">
		id：<input type="text" id="upid" >
	</div>
	<div class="add_div">
		类目名称：<input type="text" id="upname" >
	</div>
	<div class="add_div">
		默认排序：<input type="text" id="up_sort" >
	</div>
	<div class="add_div">
		跳转链接：<input type="text" id="up_jump_url" >
	</div>
		<div id="" class="edit_div">
			课程图片：<input type="text" id="edit_image_url" name="image_url">
				
				<div class="layui-upload-list imgdiv">
				    <img class="layui-upload-img" id="demo2" width="100" height="100">
				    <button type="button" class="layui-btn" id="edit_uploadImg">
					  <i class="layui-icon">&#xe67c;</i>上传图片
					</button>
			 	</div>
	</div>
	
	<div class="add-class up-confirm" id="up-confirm">修改</div>
	</div>
	
	<script>
	function addTeacher(){
		$.ajax({
	            type:"GET",
	            url:"/courseapi/getTeacher",
	         	datatype: "json",
	      		async:false,
	            success:function(data){
	            	//console.log(data)
	            	for(var i=0;i<data.length;i++){
						$("#teacher_id").append("<option value='"+data[i].id+"'>"+
							data[i].teacher_name+"</option>")
					}
	            },
	            error: function (jqXHR, textStatus, errorThrown) {
           			alert('error')
       			}
         	});
    }
	</script>
	<script>
	layui.use('upload', function(){
	  var upload = layui.upload;
	   
			//普通图片上传
		  	var uploadInst = upload.render({
		    elem: '#uploadImg'
		    ,url: '/courseapi/uploadImg'
		    ,before: function(obj){
		      //预读本地文件示例，不支持ie8
		      obj.preview(function(index, file, result){
		        $('#demo1').attr('src', result); //图片链接（base64）
		      });
		    }
		    ,done: function(res){
		    	console.log(res)
		      //如果上传失败
		      if(res.code > 1){
		        return layer.msg('上传失败');
		      }
		      //上传成功
		     
		      $("#image_url").val(res.img_url)
		     }
		    ,error: function(){
		      //演示失败状态，并实现重传
		      var demoText = $('#demoText');
		      demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-xs demo-reload">重试</a>');
		      demoText.find('.demo-reload').on('click', function(){
		      		uploadInst.upload();
		      });
		    }
		  });
  
	});
	
	layui.use('upload', function(){
		  var upload = layui.upload;
		   
				//普通图片上传
			  	var uploadInst = upload.render({
			    elem: '#edit_uploadImg'
			    ,url: '/courseapi/uploadImg'
			    ,before: function(obj){
			      //预读本地文件示例，不支持ie8
			      obj.preview(function(index, file, result){
			        $('#demo2').attr('src', result); //图片链接（base64）
			      });
			    }
			    ,done: function(res){
			    	console.log(res)
			      //如果上传失败
			      if(res.code > 1){
			        return layer.msg('上传失败');
			      }
			      //上传成功
			     
			      $("#edit_image_url").val(res.img_url)
			     }
			    ,error: function(){
			      //演示失败状态，并实现重传
			      var demoText = $('#demoText');
			      demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-xs demo-reload">重试</a>');
			      demoText.find('.demo-reload').on('click', function(){
			      		uploadInst.upload();
			      });
			    }
			  });
	  
		});
	</script>
  </body>
</html>